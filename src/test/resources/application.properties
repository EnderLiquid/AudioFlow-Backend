# 测试专用配置（单元测试运行时自动加载）

############## 测试环境特定配置 ##############
# 数据库配置 - 使用真实MySQL测试库
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/audioflow_test?useSSL=false&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=${DB_PASSWORD:hachimi}

# Redis 配置（独立数据库）
spring.data.redis.database=1
spring.data.redis.password=${REDIS_PASSWORD:hachimi}

############## 测试特定配置覆盖 ##############
# 单元测试使用本地文件存储（不依赖 S3）
file.storage.active=local
file.storage.local.storage-dir=./target/test-upload/
file.storage.local.url-prefix=http://127.0.0.1:8081/file/
file.storage.s3.endpoint=
file.storage.s3.region=
file.storage.s3.access-key=
file.storage.s3.secret-key=
file.storage.s3.bucket-name=

# 测试环境使用较小的文件上传限制
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=20MB

# 关闭 Sa-Token 日志（减少测试输出）
sa-token.is-log=false

############## 日志配置 - 减少测试输出 ##############
logging.level.root=WARN
logging.level.top.enderliquid.audioflow=WARN
